# 作业6

## 李毅PB22051031

#### 4.16

##### 4.16.4

仅Load/store指令用到数据存储，故利用率为20+15=35%

##### 4.16.5

Load和ALU/Logic用到寄存器写，故利用率为45+20=65%

#### 4.22

##### 4.22.1

| sd x29, 12(x16)   | IF   | ID   | EX   | MEM  | WB   |      |      |      |      | | | |
| :--- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| ld x29, 8(x16)   |      | **IF** | **ID** | **EX** | **MEM** | **WB** |      |      |      | | | |
| sub x17, x15, x14  |      |      | **IF** | **ID** | **EX** | MEM | **WB** |      |      | | | |
| beqz x17, label |      |      |      | xx | xx | **IF** | **ID** | **EX** | MEM | WB | | |
| add x15, x11, x14  |      |      |      |      |      |      | **IF** | **ID** | **EX** | MEM | **WB** | |
| sub x15,x30,x14  |      |      |      |      |      |      |      | **IF** | **ID** | **EX** | MEM | **WB** |

在beqz处会发生数据与结构冒险，必须停顿

##### 4.22.2

不能。每个代码都有取指操作，无法通过重排避免冒险

##### 4.22.3

不能。NOP代码也有取指操作

##### 4.22.4

仅Load/store指令用到数据存储，导致结构冒险，故占比为25+11=36%。约多产生36%周期停顿。

#### 4.25

**4.25.1**

| ld x10, 0(x13)    | IF   | ID     | EX     | MEM    | WB      |        |        |        |        |         |         |        |        |        |        |      |      |
| ----------------- | ---- | ------ | ------ | ------ | ------- | ------ | ------ | ------ | ------ | ------- | ------- | ------ | ------ | ------ | ------ | ---- | ---- |
| ld x11, 8(x13)    |      | **IF** | **ID** | **EX** | **MEM** | **WB** |        |        |        |         |         |        |        |        |        |      |      |
| add x12, x10, x11 |      |        | **IF** | **ID** | ***     | **EX** | MEM    | **WB** |        |         |         |        |        |        |        |      |      |
| subi x13, x13, 16 |      |        |        | **IF** | ***     | **ID** | **EX** | MEM    | **WB** |         |         |        |        |        |        |      |      |
| bnez x12, LOOP    |      |        |        |        | ***     | **IF** | **ID** | **EX** | MEM    | WB      |         |        |        |        |        |      |      |
| ld x10, 0(x13)    |      |        |        |        |         |        | **IF** | **ID** | **EX** | **MEM** | **WB**  |        |        |        |        |      |      |
| ld x11, 8(x13)    |      |        |        |        |         |        |        | **IF** | **ID** | **EX**  | **MEM** | **WB** |        |        |        |      |      |
| add x12, x10, x11 |      |        |        |        |         |        |        |        | **IF** | **ID**  | ***     | **EX** | MEM    | **WB** |        |      |      |
| subi x13, x13, 16 |      |        |        |        |         |        |        |        |        | **IF**  | ***     | **ID** | **EX** | MEM    | **WB** |      |      |
| bnez x12, LOOP    |      |        |        |        |         |        |        |        |        |         | ***     | **IF** | **ID** | **EX** | MEM    | WB   |      |

**4.25.2**

表中加粗部分即为当下用到的流水级，未加粗部分即为没有进行有用操作的流水级。

观察得，永远不会全在有用操作。



#### 思考题

##### 为何RISC一条指令仅在最后一个流水段写一个结果？

减少结构冒险的发生，有利于前递的实现



##### 典型的流水线多发射技术有哪些？

静态多发射，动态多发射等